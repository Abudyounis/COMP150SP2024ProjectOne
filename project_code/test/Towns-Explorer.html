<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DnD Game</title>
    <style>
        body, html {
            height: 100%;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background: black;
            color: white;
            font-family: Arial, sans-serif;
        }
        #gameContainer {
            text-align: center;
        }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <h1>Welcome to the Web-based DnD Game!</h1>
        <p id="gameDescription">Click the button below to start your adventure.</p>
        <button onclick="initializeGame()">Start Game</button>
        <div id="gameOutput"></div>
    </div>

    <script>
        let characters = []; // Array to manage multiple characters

        function initializeGame() {
            const outputDiv = document.getElementById('gameOutput');
            outputDiv.innerHTML = '<p>How many characters are joining the adventure?</p>';
            outputDiv.innerHTML += '<input id="numCharacters" type="number" min="1" max="10" value="1">';
            outputDiv.innerHTML += '<button onclick="createCharacters()">Create Characters</button>';
        }

        function createCharacters() {
            const numCharacters = parseInt(document.getElementById('numCharacters').value, 10);
            const outputDiv = document.getElementById('gameOutput');
            outputDiv.innerHTML = '';
            for (let i = 0; i < numCharacters; i++) {
                const name = prompt(`Enter name for character #${i + 1}:`);
                const newCharacter = createCharacter(name);
                characters.push(newCharacter);
                outputDiv.innerHTML += `<p>Character Created: ${newCharacter.name}</p>`;
                outputDiv.innerHTML += `<p>Stats: ${displayStats(newCharacter.stats)}</p>`;
                outputDiv.innerHTML += `<p>Capacity: Mana - ${newCharacter.capacity.Mana}, Stamina - ${newCharacter.capacity.Stamina}, Psy - ${newCharacter.capacity.Psy}</p>`;
                outputDiv.innerHTML += `<button onclick="rest(${i})">Rest</button>`;
                outputDiv.innerHTML += `<button onclick="quitGame(${i})">Quit Game</button><br>`;
            }
        }

        function createCharacter(name) {
            let legacyPoints = Math.floor(Math.random() * 51);
            return {
                name: name,
                level: 1,
                experience: 0,
                stats: {
                    Strength: randomStat("Strength", legacyPoints),
                    Dexterity: randomStat("Dexterity", legacyPoints),
                    Constitution: randomStat("Constitution", legacyPoints),
                    Vitality: randomStat("Vitality", legacyPoints),
                    Endurance: randomStat("Endurance", legacyPoints),
                    Intelligence: randomStat("Intelligence", legacyPoints),
                    Wisdom: randomStat("Wisdom", legacyPoints),
                    Knowledge: randomStat("Knowledge", legacyPoints),
                    Willpower: randomStat("Willpower", legacyPoints),
                    Spirit: randomStat("Spirit", legacyPoints)
                },
                capacity: {
                    Mana: Math.floor(Math.random() * 11) + 10,
                    Stamina: Math.floor(Math.random() * 11) + 10,
                    Psy: Math.floor(Math.random() * 11) + 10
                }
            };
        }

        function randomStat(name, legacyPoints) {
            return { name: name, value: Math.floor(Math.random() * 10) + 1 + Math.floor(legacyPoints / 10) };
        }

        function displayStats(stats) {
            return Object.values(stats).map(stat => `${stat.name}: ${stat.value}`).join(', ');
        }

        function rest(characterIndex) {
            const character = characters[characterIndex];
            Object.values(character.stats).forEach(stat => {
                stat.value += Math.floor(Math.random() * 3) + 1;
            });
            alert(`${character.name} has rested and gained strength.`);
            updateCharacterDisplay(characterIndex);
        }

        function updateCharacterDisplay(characterIndex) {
            const character = characters[characterIndex];
            const outputDiv = document.getElementById('gameOutput');
            outputDiv.innerHTML += `<p>Updated Stats for ${character.name}: ${displayStats(character.stats)}</p>`;
        }

        function quitGame(characterIndex) {
            const character = characters.splice(characterIndex, 1)[0]; // Remove character from array
            alert(`${character.name} has left the game.`);
            if (characters.length === 0) {
                const outputDiv = document.getElementById('gameOutput');
                outputDiv.innerHTML = '<p>All characters have left. The game is now over.</p>';
            }
        }
    </script>
</body>
</html>
